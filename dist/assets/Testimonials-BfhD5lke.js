import{j as a,g as _}from"./index-BZbPjpZp.js";import{r}from"./vendor-CIP6LD3P.js";import"./motion-S1EdF0m5.js";const w=({page:l,onNavigate:p})=>{const[o,h]=r.useState([]),[n,d]=r.useState(!1),[x,f]=r.useState(!0),[b,j]=r.useState(1),u=32,g=async(e=1,i=!1)=>{if(!n){d(!0);try{const t=await _(e,u),m=t.data.map(s=>({id:s.id,title:s.title||s.name,name:s.name,body:s.body||"",slug:s.slug,images:s.images||[],tags:s.tags||[],published:s.published||!1,created_at:s.created_at,updated_at:s.updated_at}));h(s=>i?[...s,...m]:m),f(t.meta.has_more_pages),j(t.meta.current_page)}catch(t){console.error("Error fetching testimonials:",t)}finally{d(!1)}}};r.useEffect(()=>{g()},[]);const T=()=>{g(b+1,!0)},c=e=>{p(`/${l.slug}/${e.slug}`)},y=e=>e.replace(/'s Testimonial$/i,"");return a.jsxs("div",{className:"container mx-auto px-4",children:[l.name&&a.jsx("h1",{className:"mb-6 font-serif text-gray-900",dangerouslySetInnerHTML:{__html:l.name}}),o.length>0&&a.jsxs("div",{className:"mb-8",children:[a.jsx("div",{className:"container mx-auto",children:a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:o.map(e=>a.jsxs("div",{className:"flex flex-col cursor-pointer lg:p-12",role:"button",onClick:()=>c(e),children:[a.jsx("a",{href:`/${l.slug}/${e.slug}`,onClick:i=>{i.preventDefault(),c(e)},className:"PostsGallery--header block text-center",dangerouslySetInnerHTML:{__html:y(e.title)}}),e.images.length>0&&a.jsx("div",{onClick:()=>c(e),role:"button",children:a.jsx("img",{alt:e.title,src:e.images[0].path,className:"w-full"})})]},e.id))})}),x&&o.length%u===0&&a.jsx("button",{onClick:T,disabled:n,className:"w-full mt-3 py-3 px-6 bg-purple-600 text-white font-medium rounded hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:n?"Loading...":"Show More"})]})]})};export{w as default};
